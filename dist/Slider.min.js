var SlideDirection;!function(i){i.Left="left",i.Right="right"}(SlideDirection=SlideDirection||{});class Slider{constructor(i,t={}){var e;this.currentIndex=0,this.previousIndex=0,this.isHoldingTouch=!1,this.previousScrollPosition=0,this.CLASS_PREFIX="ls-",this.SLIDER_CLASS=this.CLASS_PREFIX+"slider",this.SLIDER_SLIDE_CLASS=this.CLASS_PREFIX+"slide",this.SLIDER_PREVIOUS_BUTTON_CLASS=this.CLASS_PREFIX+"previous-button",this.SLIDER_NEXT_BUTTON_CLASS=this.CLASS_PREFIX+"next-button",this.SLIDER_ELEMENT_CLASS=this.CLASS_PREFIX+"element",this.SLIDER_ELEMENT_ACTIVE_CLASS=this.CLASS_PREFIX+"active",this.SLIDER_INDICATOR_WRAPPER_CLASS=this.CLASS_PREFIX+"indicator-wrapper",this.SLIDER_INDICATOR_CLASS=this.CLASS_PREFIX+"indicator",this.SLIDER_INDICATOR_ACTIVE_CLASS=this.CLASS_PREFIX+"active",this.SLIDER_INITIALIZED_CLASS=this.CLASS_PREFIX+"initialized",this.SLIDER_INITIALIZED_EVENT=this.CLASS_PREFIX+"initialized",this.SLIDER_SLIDE_END_EVENT=this.CLASS_PREFIX+"slideend",this.SLIDER_SWIPE_END_EVENT=this.CLASS_PREFIX+"swipeend",this.SLIDER_TOUCH_CONTROLS_CLASS=this.CLASS_PREFIX+"touch-controls",this.OBSERVER_COLLIDER_CLASS=this.CLASS_PREFIX+"observer-collider",this.DEFAULT_OPTIONS={visibleSlides:1,startingIndex:0,sliderElementClass:"",touchControls:!0,autoSlide:!1,interval:5e3,direction:SlideDirection.Right,previousButton:`<button class="${this.SLIDER_PREVIOUS_BUTTON_CLASS}"></button>`,nextButton:`<button class="${this.SLIDER_NEXT_BUTTON_CLASS}"></button>`,infinite:!1,indicators:!0},this.slider=i,this.sliderElements=null==(e=this.slider)?void 0:e.querySelectorAll(":scope > *"),this.isTouchDevice=this.checkIfTouchDevice(),this.options=this.DEFAULT_OPTIONS,Object.assign(this.options,t),i&&(this.applyOptions(),this.buildMarkup(),this.setInitializedState())}applyOptions(){var i;this.options.touchControls&&null!=(i=this.slider)&&i.classList.add(this.SLIDER_TOUCH_CONTROLS_CLASS),this.options.autoSlide&&(this.interval=setInterval(()=>{this.options.direction===SlideDirection.Left?this.slidePrev():this.slideNext()},this.options.interval))}checkIfTouchDevice(){return"ontouchstart"in window||0<navigator.maxTouchPoints}buildMarkup(){var t;if(void 0!==this.sliderElements){var e=document.createElement("ul");e.classList.add(this.SLIDER_SLIDE_CLASS);let i=0;for(const l of this.sliderElements){var s,n=document.createElement("li");n.className=this.SLIDER_ELEMENT_CLASS+" "+this.options.sliderElementClass,n.dataset.index=""+i,i===this.options.startingIndex&&n.classList.add(this.SLIDER_ELEMENT_ACTIVE_CLASS),n.appendChild(l),this.options.touchControls&&((s=document.createElement("div")).classList.add(this.OBSERVER_COLLIDER_CLASS),n.appendChild(s)),e.insertAdjacentElement("beforeend",n),i++}null!=(t=this.slider)&&t.insertAdjacentElement("afterbegin",e),this.slide=e,this.sliderElements=this.slide.children,this.options.infinite&&(null!=(t=this.slide)&&t.insertAdjacentElement("afterbegin",null==(t=this.sliderElements)?void 0:t[this.sliderElements.length-1]),null!=(t=this.slider))&&t.addEventListener(this.SLIDER_INITIALIZED_EVENT,()=>{this.slideTo(0,SlideDirection.Right)}),this.initSliderEvents(),this.buildArrows(),this.buildIndicators(),this.initTouchControlsObserver()}}initSliderEvents(){var i;let t;null!=(i=this.slide)&&i.addEventListener("scroll",()=>{t&&clearTimeout(t),t=setTimeout(()=>{var i;null!=(i=this.slider)&&i.dispatchEvent(new Event(this.SLIDER_SLIDE_END_EVENT)),this.previousScrollPosition=null==(i=this.slide)?void 0:i.scrollLeft},100)}),null!=(i=this.slider)&&i.addEventListener("touchstart",()=>{this.isHoldingTouch=!0}),null!=(i=this.slider)&&i.addEventListener("touchend",()=>{this.isHoldingTouch=!1})}buildArrows(){var i,t=document.createElement("div");t.innerHTML=this.options.previousButton,null!=(i=this.slider)&&i.insertAdjacentElement("afterbegin",t.firstChild),this.previousButton=null==(i=this.slider)?void 0:i.querySelector("."+this.SLIDER_PREVIOUS_BUTTON_CLASS),t.innerHTML=this.options.nextButton,null!=(i=this.slider)&&i.insertAdjacentElement("beforeend",t.firstChild),this.nextButton=null==(i=this.slider)?void 0:i.querySelector("."+this.SLIDER_NEXT_BUTTON_CLASS),this.initButtonEvents()}initButtonEvents(){var i;null!=(i=this.previousButton)&&i.addEventListener("click",()=>{this.slidePrev(),this.interval&&clearInterval(this.interval)}),null!=(i=this.nextButton)&&i.addEventListener("click",()=>{this.slideNext(),this.interval&&clearInterval(this.interval)})}buildIndicators(){var i;if(this.options.indicators&&void 0!==this.sliderElements){var t=document.createElement("ul");t.classList.add(this.SLIDER_INDICATOR_WRAPPER_CLASS);for(let i=0;i<(null==(e=this.sliderElements)?void 0:e.length);i++){var e=document.createElement("li");e.classList.add(this.SLIDER_INDICATOR_CLASS),e.dataset.index=i.toString(),i===this.currentIndex&&e.classList.add(this.SLIDER_INDICATOR_ACTIVE_CLASS),t.appendChild(e)}null!=(i=this.slider)&&i.insertAdjacentElement("beforeend",t),this.indicatorWrapper=t,this.initIndicatorEvents()}}initIndicatorEvents(){var i;const t=null==(i=this.indicatorWrapper)?void 0:i.children;if(t){for(const e of t)e.addEventListener("click",()=>{e.dataset.index&&this.setSlide(parseInt(e.dataset.index))});null!=(i=this.slider)&&i.addEventListener(this.SLIDER_SWIPE_END_EVENT,()=>{for(const i of t)i.dataset.index&&parseInt(i.dataset.index)===this.currentIndex?i.classList.add(this.SLIDER_INDICATOR_ACTIVE_CLASS):i.classList.remove(this.SLIDER_INDICATOR_ACTIVE_CLASS)})}}initTouchControlsObserver(){var i;if(this.options.touchControls&&this.isTouchDevice){let t=!0,e;const s=new IntersectionObserver(i=>{if(t)return t=!1;i.forEach(i=>{if(i.isIntersecting){const t=i.target.closest("."+this.SLIDER_ELEMENT_CLASS);e&&clearTimeout(e),e=setTimeout(()=>{var i;null!==t&&void 0!==t.dataset.index&&(this.previousIndex=this.currentIndex,this.currentIndex=parseInt(t.dataset.index),null!=(i=this.slider)&&i.dispatchEvent(new Event(this.SLIDER_SWIPE_END_EVENT)),this.options.infinite)&&this.isTouchDevice&&null!=(i=this.slider)&&i.addEventListener(this.SLIDER_SLIDE_END_EVENT,()=>{if(this.isHoldingTouch)return!1;var i=this.previousScrollPosition&&this.slide&&this.previousScrollPosition<(null==(i=this.slide)?void 0:i.scrollLeft)?SlideDirection.Right:SlideDirection.Left;this.slideTo(this.currentIndex,i)},{once:!0})},100)}})});null!=(i=this.slider)&&i.addEventListener(this.SLIDER_INITIALIZED_EVENT,()=>{var i;null!=(i=null==(i=this.slide)?void 0:i.querySelectorAll("."+this.OBSERVER_COLLIDER_CLASS))&&i.forEach(i=>{s.observe(i)})})}}setInitializedState(){if(void 0!==this.sliderElements){var i=null==(i=this.slide)?void 0:i.querySelectorAll("img");const e=null==i?void 0:i.length;let t=0;null!=i&&i.forEach(i=>{i.complete?t++:i.addEventListener("load",()=>{var i;++t===e&&(null!=(i=this.slider)&&i.classList.add(this.SLIDER_CLASS,this.SLIDER_INITIALIZED_CLASS),null!=(i=this.slider))&&i.dispatchEvent(new Event(this.SLIDER_INITIALIZED_EVENT))})})}}slideNext(){var i;this.previousIndex=this.currentIndex,this.currentIndex===(null!=(i=null==(i=this.sliderElements)?void 0:i.length)?i:1)-1?this.options.infinite?this.currentIndex=0:this.nextButton&&(this.nextButton.disabled=!0):(this.previousButton&&!this.options.infinite&&(this.previousButton.disabled=!1),this.currentIndex++),this.slideTo(this.currentIndex,SlideDirection.Right)}slidePrev(){var i;this.previousIndex=this.currentIndex,0===this.currentIndex?this.options.infinite?this.currentIndex=(null!=(i=null==(i=this.sliderElements)?void 0:i.length)?i:1)-1:this.previousButton&&(this.previousButton.disabled=!0):(this.nextButton&&!this.options.infinite&&(this.nextButton.disabled=!1),this.currentIndex--),this.slideTo(this.currentIndex,SlideDirection.Left)}setSlide(i){var t;let e=this.previousScrollPosition&&this.slide&&this.previousScrollPosition<(null==(t=this.slide)?void 0:t.scrollLeft)?SlideDirection.Right:SlideDirection.Left;this.previousIndex+1===(null==(t=this.sliderElements)?void 0:t.length)&&0===i?e=SlideDirection.Right:0===this.previousIndex&&i+1===(null==(t=this.sliderElements)?void 0:t.length)&&(e=SlideDirection.Left),this.previousIndex=this.currentIndex,this.currentIndex=i,this.slideTo(this.currentIndex,e)}slideTo(i,t){var e;if(void 0!==this.sliderElements){for(const n of this.sliderElements)n.classList.remove(this.SLIDER_ELEMENT_ACTIVE_CLASS);if(this.options.infinite&&(t===SlideDirection.Right&&this.previousIndex<i||0===i&&this.previousIndex===this.sliderElements.length-1?null!=(e=this.slide)&&e.insertAdjacentElement("beforeend",null==(e=this.sliderElements)?void 0:e[0]):(t===SlideDirection.Left&&this.previousIndex>i||i===this.sliderElements.length-1&&0===this.previousIndex)&&null!=(e=this.slide)&&e.insertAdjacentElement("afterbegin",null==(t=this.sliderElements)?void 0:t[this.sliderElements.length-1])),this.options.indicators){t=null==(e=this.indicatorWrapper)?void 0:e.children;if(void 0!==t)for(const l of t)l.dataset.index&&parseInt(l.dataset.index)===this.currentIndex?l.classList.add(this.SLIDER_INDICATOR_ACTIVE_CLASS):l.classList.remove(this.SLIDER_INDICATOR_ACTIVE_CLASS)}const s=null==(e=this.slide)?void 0:e.querySelector(`.${this.SLIDER_ELEMENT_CLASS}[data-index="${i}"]`);requestAnimationFrame(()=>{null!==s&&void 0!==s&&s.scrollIntoView(),null!==s&&void 0!==s&&s.classList.add(this.SLIDER_ELEMENT_ACTIVE_CLASS)})}}}export{Slider};